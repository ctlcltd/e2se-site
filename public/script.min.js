/*!
 * script.js
 * 
 * @author Leonardo Laureti
 * @license MIT License
 */
(function(){const doc=document,body=doc.body;function preferredColor(){let e=sessionStorage.getItem("preferred-color");if(e="light"==e||"dark"==e?e:null,e=e??(matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),e){body.setAttribute("data-color",e),"dark"==e?body.classList.add("dark"):body.classList.remove("dark");const t=doc.getElementById("switch-color");t.innerText="switch to "+("light"==e?"dark":"light")}}function switchColor(e){const t=e.target;var o;"switch-color"==t.id&&("light"!=(o=body.hasAttribute("data-color")?body.getAttribute("data-color"):"light")&&"dark"!=o||(e="light"==o?"dark":"light",t.innerText="switch to "+o,body.setAttribute("data-color",e),"light"==o?body.classList.add("dark"):body.classList.remove("dark"),setTimeout(function(){t.blur()},100),sessionStorage.setItem("preferred-color",e),load_images()))}function abbrbox(){function t(e){const t=doc.createElement("div"),o=doc.createElement("div");t.className="abbrbox",o.className="inner",o.innerText=e._title,t.append(o),e.append(t),e._abbr=t,setTimeout(function(){body._abbrbox=e},0),setTimeout(function(){r(e)},7e3)}function r(e){e._abbr&&(e._abbr.remove(),delete e._abbr,delete body._abbrbox)}function e(e){e=e.target;"ABBR"!==e.nodeName||e._abbr?e._abbr?r.call(this,e):body._abbrbox&&r.call(this,body._abbrbox):t.call(this,e)}for(const o of doc.querySelectorAll("abbr"))o._title=o.title,o.setAttribute("title",""),o.addEventListener("click",e),o.addEventListener("mouseenter",e);body.addEventListener("click",e)}function platform_detect(){function e(e){return/win/i.test(e)?"w":/mac/i.test(e)?"m":void 0}return e(navigator.platform)??e(navigator.useragent)??"f"}function load_images(e){let t=sessionStorage.getItem("preferred-color");t="light"==t||"dark"==t?t[0]:null;let o=0;for(const a of doc.querySelectorAll(".img img")){a.disabled=!0,a.removeAttribute("src"),window.platform=window.platform??platform_detect();let e="screenshot-";var r=a.parentElement.className.substr(-1);if("f"==r)e+="sat-list-editor",t=o++?"d":"l";else{if("a"!=r&&"b"!=r&&"d"!=r&&"e"!=r)return;"b"==r?e+="sat-channel-book":"d"==r?e+="edit-service-transponders-sat":"e"==r&&(e+="picons-editor-sat"),t=t??(matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"d":"l")}r="img/"+e+"_"+r+platform+("w"==platform?"l":t)+platform+".svg";a.setAttribute("src",r),a.disabled=!1}}preferredColor(),doc.getElementById("head").addEventListener("click",switchColor),load_images(),window.addEventListener("appearance-changed",load_images),abbrbox();})()