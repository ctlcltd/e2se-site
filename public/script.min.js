/*!
 * script.js
 * 
 * @author Leonardo Laureti
 * @license MIT License
 */
(function(){const doc=document,body=doc.body,head=doc.getElementById("head");function preferredColor(){let e=sessionStorage.getItem("preferred-color");e="light"==e||"dark"==e?e:null,e=e??(matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),e&&(body.setAttribute("data-color",e),"dark"==e?body.classList.add("dark"):body.classList.remove("dark"))}function switchColor(e){let t=e.target;var o;t="switch-color"==t.id?t:t.closest("#switch-color"),t&&("light"!=(o=body.hasAttribute("data-color")?body.getAttribute("data-color"):"light")&&"dark"!=o||(e="light"==o?"dark":"light",body.setAttribute("data-color",e),"light"==o?body.classList.add("dark"):body.classList.remove("dark"),setTimeout(function(){t.blur()},100),sessionStorage.setItem("preferred-color",e),load_images()))}function offCanvas(e){let t=e.target;function o(e){"backdrop"==e.target.className&&(doc.querySelectorAll("#side aside"),body.classList.remove("offcanvas"),body._backdrop.remove())}function a(e){body.classList.contains("offcanvas")?body.removeEventListener("click",o):function(){const e=document.createElement("div");e.className="backdrop",body._backdrop=e,body.append(e),body.addEventListener("click",o)}(),e&&(body.classList.toggle("offcanvas"),e.classList.toggle("on"))}var r;t=t.hasAttribute("data-target")?t:t.closest("[data-target]"),t&&(r=t.getAttribute("data-target"),e=doc.querySelector(r),console.log(r),a(e),setTimeout(function(){t.blur()},100))}function abbrbox(){function t(e){const t=doc.createElement("div"),o=doc.createElement("div");t.className="abbrbox",o.className="inner",o.innerText=e._title,t.append(o),e.append(t),e._abbr=t,setTimeout(function(){body._abbrbox=e},0),setTimeout(function(){a(e)},7e3)}function a(e){e._abbr&&(e._abbr.remove(),delete e._abbr,delete body._abbrbox)}function e(e){e=e.target;"ABBR"!==e.nodeName||e._abbr?e._abbr?a.call(this,e):body._abbrbox&&a.call(this,body._abbrbox):t.call(this,e)}for(const o of doc.querySelectorAll("abbr"))o._title=o.title,o.setAttribute("title",""),o.addEventListener("click",e),o.addEventListener("mouseenter",e);body.addEventListener("click",e)}function platform_detect(){function e(e){return/win/i.test(e)?"w":/mac/i.test(e)||/safari/i.test(e)?"m":void 0}return e(navigator.platform)??e(navigator.useragent)??"f"}function load_images(e){let o=sessionStorage.getItem("preferred-color");o="light"==o||"dark"==o?o[0]:null;let a=0;for(const d of doc.querySelectorAll(".img img")){d.disabled=!0,d.removeAttribute("src"),window.platform=window.platform??platform_detect();let e=d.parentElement.className.substr(-1),t="screenshot-";if("f"==e)e="a",t+="sat-list-editor",o=a++?"d":"l";else{if("a"!=e&&"b"!=e&&"d"!=e&&"e"!=e)return;"a"==e?t+="sat-list-editor":"b"==e?t+="sat-channel-book":"d"==e?t+="edit-service-transponders-sat":"e"==e&&(t+="picons-editor-sat"),o=o??(matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"d":"l")}var r="img/"+t+"_"+e+platform+o+platform+".svg";d.setAttribute("src",r),d.disabled=!1}}preferredColor(),head.addEventListener("click",switchColor),head.addEventListener("click",offCanvas),load_images(),window.addEventListener("appearance-changed",load_images),abbrbox();})()