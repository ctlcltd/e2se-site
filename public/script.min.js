/*!
 * script.js
 * 
 * @author Leonardo Laureti
 * @license MIT License
 */
(function(){const doc=document,body=doc.body;var platform;function preferredColor(){let t=sessionStorage.getItem("preferred-color");if(t="light"==t||"dark"==t?t:null,t=t??(matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t){body.setAttribute("data-color",t),"dark"==t?body.classList.add("dark"):body.classList.remove("dark");const e=doc.getElementById("switch-color");e.innerText="switch to "+("light"==t?"dark":"light")}}function switchColor(t){const e=t.target;var r;"switch-color"==e.id&&("light"!=(r=body.hasAttribute("data-color")?body.getAttribute("data-color"):"light")&&"dark"!=r||(t="light"==r?"dark":"light",e.innerText="switch to "+r,body.setAttribute("data-color",t),"light"==r?body.classList.add("dark"):body.classList.remove("dark"),setTimeout(function(){e.blur()},100),sessionStorage.setItem("preferred-color",t),load_images()))}function platform_detect(){function t(t){return/win/i.test(t)?"w":/mac/i.test(t)?"m":void 0}return t(navigator.platform)??t(navigator.useragent)??"f"}function load_images(t){let e=sessionStorage.getItem("preferred-color");e="light"==e||"dark"==e?e[0]:null;let r=0;for(const a of doc.querySelectorAll(".img img")){a.disabled=!0,a.removeAttribute("src"),platform=platform??platform_detect();let t;var o=a.parentElement.className.substr(-1);"f"!=o?(e=e??(matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches?"d":"l"),"b"!=o&&"e"!=o||(t=o)):e=r++?"d":"l";o="../src/test/"+(t?t+"-":"")+platform+"-"+("w"==platform?"l":e)+platform+".svg";a.setAttribute("src",o),a.disabled=!1}}preferredColor(),doc.getElementById("head").addEventListener("click",switchColor),load_images(),window.addEventListener("appearance-changed",load_images);})()